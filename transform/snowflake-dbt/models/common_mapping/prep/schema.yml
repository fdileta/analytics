version: 2

models:
  - name: prep_sfdc_account
    description: '{{ doc("prep_sfdc_account") }}'
    columns:
      - name: crm_account_id
        description: CRM Account ID provided by Salesforce
        tests:
          - not_null
      - name: tsp_sub_region_clean
        description: Sales sub region, temp cleaning column
      - name: tsp_region_clean
        description: Sales region, temp cleaning column
      - name: tsp_area_clean
        description: Sales area, temp cleaning column
      - name: tsp_territory_clean
        description: Sales territory, temp cleaning column
      - name: df_industry_clean
        description: Industry, temp cleaning column
      - name: ultimate_parent_sales_segment_clean
        description: Ultimate parent sales segment, temp cleaning column
      - name: dim_geo_area_name_source
        description: Dim geo area name final source column
      - name: dim_geo_region_name_source
        description: Dim geo region name final source column
      - name: dim_geo_sub_region_name_source
        description: Dim geo sub region name final source column
      - name: dim_sales_territory_name_source
        description: Dim sales territory name final source column
      - name: dim_industry_name_source
        description: Dim industry name final source column
      - name: dim_sales_segment_name_source
        description: Dim sales segment name final source column

  - name: prep_crm_sales_hierarchy_live
    description: '{{ doc("prep_crm_sales_hierarchy_live") }}'
    columns:
      - name: dim_crm_sales_hierarchy_live_id
        description: Unique identifier of a sales hierarchy tier
        tests:
          - not_null
          - unique

  - name: prep_crm_sales_hierarchy_stamped
    description: '{{ doc("prep_crm_sales_hierarchy_stamped") }}'
    columns:
      - name: dim_crm_sales_hierarchy_stamped_id
        description: Unique identifier of a sales hierarchy tier
        tests:
          - not_null
          - unique

  - name: prep_geo_area
    description: '{{ doc("prep_geo_area") }}'
    columns:
      - name: dim_geo_area_id
        description: Unique identifier of a geo area
        tests:
          - not_null
          - unique

  - name: prep_geo_region
    description: '{{ doc("prep_geo_region") }}'
    columns:
      - name: dim_geo_region_id
        description: Unique identifier of a geo region
        tests:
          - not_null
          - unique

  - name: prep_geo_sub_region
    description: '{{ doc("prep_geo_sub_region") }}'
    columns:
      - name: dim_geo_sub_region_id
        description: Unique identifier of a geo sub region
        tests:
          - not_null
          - unique

  - name: prep_industry
    description: '{{ doc("prep_industry") }}'
    columns:
      - name: dim_industry_id
        description: Unique identifier of an industry
        tests:
          - not_null
          - unique

  - name: prep_location_region
    description: '{{ doc("prep_location_region") }}'
    columns:
      - name: dim_location_region_id
        description: Unique identifier of a geographical region
        tests:
          - not_null
          - unique

  - name: prep_marketing_channel
    description: '{{ doc("prep_marketing_channel") }}'
    columns:
      - name: dim_marketing_channel_id
        description: Unique identifier of a marketing channel
        tests:
          - not_null
          - unique

  - name: prep_opportunity_source
    description: '{{ doc("prep_opportunity_source") }}'
    columns:
      - name: dim_opportunity_source_id
        description: Unique identifier of an opportunity source
        tests:
          - not_null
          - unique

  - name: prep_order_type
    description: '{{ doc("prep_order_type") }}'
    columns:
      - name: dim_order_type_id
        description: Unique identifier of an order type
        tests:
          - not_null
          - unique

  - name: prep_purchase_channel
    description: '{{ doc("prep_purchase_channel") }}'
    columns:
      - name: dim_purchase_channel_id
        description: Unique identifier of a purchase channel
        tests:
          - not_null
          - unique

  - name: prep_recurring_charge
    description: '{{ doc("prep_recurring_charge") }}'
    columns:
      - name: mrr_id
        description: The unique identifier of the MRR.
        tests:
          - not_null
          - unique
      - name: date_id
        description: The identifier of date month in dim_date
      - name: subscription_id
        description: The identifier of subscription in dim_subscriptions table
        tests:
          - not_null
      - name: product_details_id
        description: The identifier of product details in dim_product_details
        tests:
          - not_null
      - name: billing_account_id
        description: Zuora account id
      - name:  crm_account_id
        description: account id frm crm
      - name: mrr
        description: Monthly Recurring Revenue value for given month
      - name: arr
        description: Annual Recurring Revenue value for given month
      - name: quantity
        description: Total quantity

  - name: prep_sales_segment
    description: '{{ doc("prep_sales_segment") }}'
    columns:
      - name: dim_sales_segment_id
        description: Unique identifier of a sales segment
        tests:
          - not_null
          - unique

  - name: prep_sales_territory
    description: '{{ doc("prep_sales_territory") }}'
    columns:
      - name: dim_sales_territory_id
        description: Unique identifier of a geo area
        tests:
          - not_null
          - unique

  - name: prep_product_tier
    description: '{{ doc("prep_product_tier") }}'
    columns:
      - name: dim_product_tier_id
        description: "The unique identifier of Pricing tiers for Zuora Products"
        tests:
          - not_null
          - unique
      - name: product_tier_name
        description: "Product pricing tiers for both SaaS and Self-Managed customers (https://about.gitlab.com/handbook/marketing/strategic-marketing/tiers/)"
        tests:
          - not_null
          - unique
      - name: product_delivery_type
        description: "How product is delivered to customer; SaaS or Self-Managed (or Other)"
      - name: product_ranking
        description: "Numeric product pricing tier, independent of delivery type"

  - name: prep_quote
    description: '{{ doc("prep_quote") }}'
    columns:
      - name: dim_quote_id
        description: The unique identifier for each of the quotes.
        tests:
          - not_null
          - unique
      - name: quote_number  
      - name: quote_name
      - name: quote_status
      - name: is_primary_quote
      - name: quote_start_date
